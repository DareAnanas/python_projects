<FileManager>:
    fileView: fileView
    appMenu: appMenu
    contextMenu: contextMenu
    FloatLayout:
        id: layout
        FileChooserListView:
            id: fileView
            size_hint_y: None
            height: root.height - 30
            dirselect: True
            rootpath: '/home/danylo'
            path: app.settings['last_path']
            # canvas.before:
            #     Color: 
            #         rgba: (0.5, 0.5, 0.5, 1)
            #     Rectangle:
            #         pos: self.pos
            #         size: self.size
        AppMenu:
            id: appMenu
            top: root.height
            cancel_handler_widget: layout

            AppMenuTextItem:
                text: "File"
                ContextMenu:
                    ContextMenuTextItem:
                        text: "View text file"
                        on_release: root.closeHandler('app', root.viewTextFile)
                    ContextMenuTextItem:
                        text: "Rename file"
                        on_release: root.closeHandler('app', root.renameFile)
                    ContextMenuTextItem:
                        text: "Delete file"
                        on_release: root.closeHandler('app', root.deleteFile)
                    ContextMenuTextItem:
                        text: "Create empty file"
                        on_release: root.closeHandler('app', root.createFile)
                        
            AppMenuTextItem:
                text: "View"
                ContextMenu:
                    ContextMenuTextItem:
                        text: "Sort files"
                        ContextMenu:
                            ContextMenuDivider:
                                text: 'Criteria'
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Name'
                                    on_release: root.closeHandler('app', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Date'
                                    on_release: root.closeHandler('app', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Type'
                                    on_release: root.closeHandler('app', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Size'
                                    on_release: root.closeHandler('app', root.sortFiles)
                            ContextMenuDivider:
                                text: 'Order'
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'order'
                                    text: 'A-Z'
                                    on_release: root.closeHandler('app', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'order'
                                    text: 'Z-A'
                                    on_release: root.closeHandler('app', root.sortFiles)

        ContextMenu:
            id: contextMenu
            visible: False
            cancel_handler_widget: layout

            ContextMenuTextItem:
                text: "File"
                ContextMenu:
                    ContextMenuTextItem:
                        text: "View text file"
                        on_release: root.closeHandler('context', root.viewTextFile)
                    ContextMenuTextItem:
                        text: "Rename file"
                        on_release: root.closeHandler('context', root.renameFile)
                    ContextMenuTextItem:
                        text: "Delete file"
                        on_release: root.closeHandler('context', root.deleteFile)
                    ContextMenuTextItem:
                        text: "Create empty file"
                        on_release: root.closeHandler('context', root.createFile)
            ContextMenuTextItem:
                text: "View"
                ContextMenu:
                    ContextMenuTextItem:
                        text: "Sort files"
                        ContextMenu:
                            ContextMenuDivider:
                                text: 'Criteria'
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Name'
                                    on_release: root.closeHandler('context', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Date'
                                    on_release: root.closeHandler('context', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Type'
                                    on_release: root.closeHandler('context', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'criteria'
                                    text: 'Size'
                                    on_release: root.closeHandler('context', root.sortFiles)
                            ContextMenuDivider:
                                text: 'Order'
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'order'
                                    text: 'A-Z'
                                    on_release: root.closeHandler('context', root.sortFiles)
                            ContextMenuTextItem:
                                ToggleButton:
                                    group: 'order'
                                    text: 'Z-A'
                                    on_release: root.closeHandler('context', root.sortFiles)
            ContextMenuTextItem:
                text: "SubMenu #4"

<ViewTextFileModal>:
    size_hint: (0.9, 0.9)
    textInput: textInput
    BoxLayout:
        orientation: 'vertical'
        padding: [10, 10]
        spacing: 5
        TextInput:
            id: textInput
            size_hint_y: 0.9
        BoxLayout:
            size_hint_y: 0.1
            orientation: 'horizontal'
            spacing: 5
            Button:
                text: 'Close'
                on_press: root.dismiss()
            Button:
                text: 'Save'
                on_release: root.save_file()

<NameModal>:
    size_hint: (0.5, 0.3)
    nameInput: nameInput
    actionButton: actionButton
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 5
        TextInput:
            id: nameInput
            size_hint_y: 0.6
            multiline: False
        BoxLayout:
            orientation: 'horizontal'
            spacing: 5
            size_hint_y: 0.4
            Button:
                text: 'Cancel'
                on_press: root.dismiss()
            Button:
                id: actionButton

<DeleteFileModal>:
    size_hint: (0.5, 0.3)
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 5
        Label:
            size_hint_y: 0.6
            text: 'Are you sure you want to delete this file?'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.4
            spacing: 5
            Button:
                text: 'No'
                on_press: root.dismiss()
            Button:
                text: 'Yes'
                on_release: root.deleteFile()